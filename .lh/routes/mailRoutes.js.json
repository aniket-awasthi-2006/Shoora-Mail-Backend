{
    "sourceFile": "routes/mailRoutes.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 13,
            "patches": [
                {
                    "date": 1767116961658,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1767116968813,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,95 @@\n+import express from 'express';\r\n+import { fetchInbox } from '../services/imapService.js';\r\n+import { sendEmail } from '../services/smtpService.js';\r\n+\r\n+const router = express.Router();\r\n+// Login and Fetch\r\n+router.post('/login-fetch', async (req, res) => {\r\n+    const { email, password } = req.body;\r\n+\r\n+    try {\r\n+        // 1. Authenticate & Fetch Mails\r\n+        const emails = await fetchInbox(email, password);\r\n+\r\n+        // 2. Send Welcome Mail from System (Fire and forget)\r\n+        const welcomeHtml = `\r\n+        <!DOCTYPE html>\r\n+        <html>\r\n+        <head>\r\n+        <style>\r\n+            body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f4; margin: 0; padding: 0; }\r\n+            .container { max-width: 600px; margin: 20px auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\r\n+            .header { background-color: #4A90E2; color: #ffffff; padding: 30px; text-align: center; }\r\n+            .header h1 { margin: 0; font-size: 28px; font-weight: 600; }\r\n+            .content { padding: 30px; color: #333333; line-height: 1.6; }\r\n+            .features { background-color: #f9f9f9; padding: 20px; border-radius: 6px; margin: 20px 0; }\r\n+            .features ul { padding-left: 20px; }\r\n+            .features li { margin-bottom: 10px; }\r\n+            .footer { background-color: #f4f4f4; padding: 20px; text-align: center; color: #888888; font-size: 12px; }\r\n+        </style>\r\n+        </head>\r\n+        <body>\r\n+            <div class=\"container\">\r\n+            <div class=\"header\">\r\n+                <h1>Welcome to Shoora Mail!</h1>\r\n+            </div>\r\n+            <div class=\"content\">\r\n+                <p>Hello,</p>\r\n+                <p>We are thrilled to have you on board. You have successfully logged into your <strong>Shoora Mail</strong> dashboard.</p>\r\n+                \r\n+                <div class=\"features\">\r\n+                <h3>Here is what you can do now:</h3>\r\n+                <ul>\r\n+                    <li><strong>Stay Connected:</strong> Access your inbox instantly and never miss a beat.</li>\r\n+                    <li><strong>Compose with Ease:</strong> Send emails effortlessly to your contacts.</li>\r\n+                    <li><strong>Secure & Fast:</strong> Enjoy a seamless and secure email experience.</li>\r\n+                </ul>\r\n+                </div>\r\n+                <p>Best Regards,<br>The Shoora Mail Team</p>\r\n+            </div>\r\n+            <div class=\"footer\">&copy; ${new Date().getFullYear()} Shoora Mail. All rights reserved.</div>\r\n+            </div>\r\n+        </body>\r\n+        </html>`;\r\n+\r\n+        sendEmail(\r\n+            null, // Use system default authentication for the welcome mail\r\n+            {\r\n+                from: `Shoora Mail <${process.env.SITE_EMAIL}>`,\r\n+                to: email,\r\n+                subject: 'Welcome to Shoora Mail! ðŸš€',\r\n+                html: welcomeHtml,\r\n+                text: 'Welcome to Shoora Mail! You have successfully logged in.',\r\n+            }\r\n+        ).catch(err => console.log(\"Welcome mail error:\", err.message));\r\n+\r\n+        res.status(200).json({ success: true, data: emails });\r\n+    } catch (error) {\r\n+        console.error(\"Login/Fetch Error:\", error); // Log the full error to the console\r\n+        res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n+    }\r\n+});\r\n+\r\n+router.post('/login-fetch', async (req, res) => {\r\n+    const { email, password } = req.body;\r\n+\r\n+    try {\r\n+        // 1. Authenticate & Fetch Mails\r\n+        const emails = await fetchInbox(email, password);\r\n+        \r\n+// Send Mail from User\r\n+router.post('/send-mail', async (req, res) => {\r\n+    const { email, password, to, subject, body } = req.body;\r\n+    try {\r\n+        await sendEmail(\r\n+            { user: email, pass: password }, // User's credentials\r\n+            { from: email, to, subject, text: body } // Mail details\r\n+        );\r\n+        res.status(200).json({ success: true, message: \"Email Sent Successfully\" });\r\n+    } catch (error) { // Catch the error object\r\n+        console.error(\"Send Mail Error:\", error); // Log the full error to the console\r\n+        res.status(500).json({ success: false, message: error.message });\r\n+    }\r\n+});\r\n+\r\n+export default router;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1767116976603,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,96 @@\n+import express from 'express';\r\n+import { fetchInbox } from '../services/imapService.js';\r\n+import { sendEmail } from '../services/smtpService.js';\r\n+\r\n+const router = express.Router();\r\n+// Login and Fetch\r\n+router.post('/login-fetch', async (req, res) => {\r\n+    const { email, password } = req.body;\r\n+\r\n+    try {\r\n+        // 1. Authenticate & Fetch Mails\r\n+        const emails = await fetchInbox(email, password);\r\n+\r\n+        // 2. Send Welcome Mail from System (Fire and forget)\r\n+        const welcomeHtml = `\r\n+        <!DOCTYPE html>\r\n+        <html>\r\n+        <head>\r\n+        <style>\r\n+            body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f4; margin: 0; padding: 0; }\r\n+            .container { max-width: 600px; margin: 20px auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\r\n+            .header { background-color: #4A90E2; color: #ffffff; padding: 30px; text-align: center; }\r\n+            .header h1 { margin: 0; font-size: 28px; font-weight: 600; }\r\n+            .content { padding: 30px; color: #333333; line-height: 1.6; }\r\n+            .features { background-color: #f9f9f9; padding: 20px; border-radius: 6px; margin: 20px 0; }\r\n+            .features ul { padding-left: 20px; }\r\n+            .features li { margin-bottom: 10px; }\r\n+            .footer { background-color: #f4f4f4; padding: 20px; text-align: center; color: #888888; font-size: 12px; }\r\n+        </style>\r\n+        </head>\r\n+        <body>\r\n+            <div class=\"container\">\r\n+            <div class=\"header\">\r\n+                <h1>Welcome to Shoora Mail!</h1>\r\n+            </div>\r\n+            <div class=\"content\">\r\n+                <p>Hello,</p>\r\n+                <p>We are thrilled to have you on board. You have successfully logged into your <strong>Shoora Mail</strong> dashboard.</p>\r\n+                \r\n+                <div class=\"features\">\r\n+                <h3>Here is what you can do now:</h3>\r\n+                <ul>\r\n+                    <li><strong>Stay Connected:</strong> Access your inbox instantly and never miss a beat.</li>\r\n+                    <li><strong>Compose with Ease:</strong> Send emails effortlessly to your contacts.</li>\r\n+                    <li><strong>Secure & Fast:</strong> Enjoy a seamless and secure email experience.</li>\r\n+                </ul>\r\n+                </div>\r\n+                <p>Best Regards,<br>The Shoora Mail Team</p>\r\n+            </div>\r\n+            <div class=\"footer\">&copy; ${new Date().getFullYear()} Shoora Mail. All rights reserved.</div>\r\n+            </div>\r\n+        </body>\r\n+        </html>`;\r\n+\r\n+        sendEmail(\r\n+            null, // Use system default authentication for the welcome mail\r\n+            {\r\n+                from: `Shoora Mail <${process.env.SITE_EMAIL}>`,\r\n+                to: email,\r\n+                subject: 'Welcome to Shoora Mail! ðŸš€',\r\n+                html: welcomeHtml,\r\n+                text: 'Welcome to Shoora Mail! You have successfully logged in.',\r\n+            }\r\n+        ).catch(err => console.log(\"Welcome mail error:\", err.message));\r\n+\r\n+        res.status(200).json({ success: true, data: emails });\r\n+    } catch (error) {\r\n+        console.error(\"Login/Fetch Error:\", error); // Log the full error to the console\r\n+        res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n+    }\r\n+});\r\n+\r\n+router.post('/login-fetch', async (req, res) => {\r\n+    const { email, password } = req.body;\r\n+\r\n+    try {\r\n+        // 1. Authenticate & Fetch Mails\r\n+        const emails = await fetchInbox(email, password);\r\n+        res.status(200).json({ success: true, data: emails });\r\n+        \r\n+// Send Mail from User\r\n+router.post('/send-mail', async (req, res) => {\r\n+    const { email, password, to, subject, body } = req.body;\r\n+    try {\r\n+        await sendEmail(\r\n+            { user: email, pass: password }, // User's credentials\r\n+            { from: email, to, subject, text: body } // Mail details\r\n+        );\r\n+        res.status(200).json({ success: true, message: \"Email Sent Successfully\" });\r\n+    } catch (error) { // Catch the error object\r\n+        console.error(\"Send Mail Error:\", error); // Log the full error to the console\r\n+        res.status(500).json({ success: false, message: error.message });\r\n+    }\r\n+});\r\n+\r\n+export default router;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1767116982866,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,99 @@\n+import express from 'express';\r\n+import { fetchInbox } from '../services/imapService.js';\r\n+import { sendEmail } from '../services/smtpService.js';\r\n+\r\n+const router = express.Router();\r\n+// Login and Fetch\r\n+router.post('/login-fetch', async (req, res) => {\r\n+    const { email, password } = req.body;\r\n+\r\n+    try {\r\n+        // 1. Authenticate & Fetch Mails\r\n+        const emails = await fetchInbox(email, password);\r\n+\r\n+        // 2. Send Welcome Mail from System (Fire and forget)\r\n+        const welcomeHtml = `\r\n+        <!DOCTYPE html>\r\n+        <html>\r\n+        <head>\r\n+        <style>\r\n+            body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f4; margin: 0; padding: 0; }\r\n+            .container { max-width: 600px; margin: 20px auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\r\n+            .header { background-color: #4A90E2; color: #ffffff; padding: 30px; text-align: center; }\r\n+            .header h1 { margin: 0; font-size: 28px; font-weight: 600; }\r\n+            .content { padding: 30px; color: #333333; line-height: 1.6; }\r\n+            .features { background-color: #f9f9f9; padding: 20px; border-radius: 6px; margin: 20px 0; }\r\n+            .features ul { padding-left: 20px; }\r\n+            .features li { margin-bottom: 10px; }\r\n+            .footer { background-color: #f4f4f4; padding: 20px; text-align: center; color: #888888; font-size: 12px; }\r\n+        </style>\r\n+        </head>\r\n+        <body>\r\n+            <div class=\"container\">\r\n+            <div class=\"header\">\r\n+                <h1>Welcome to Shoora Mail!</h1>\r\n+            </div>\r\n+            <div class=\"content\">\r\n+                <p>Hello,</p>\r\n+                <p>We are thrilled to have you on board. You have successfully logged into your <strong>Shoora Mail</strong> dashboard.</p>\r\n+                \r\n+                <div class=\"features\">\r\n+                <h3>Here is what you can do now:</h3>\r\n+                <ul>\r\n+                    <li><strong>Stay Connected:</strong> Access your inbox instantly and never miss a beat.</li>\r\n+                    <li><strong>Compose with Ease:</strong> Send emails effortlessly to your contacts.</li>\r\n+                    <li><strong>Secure & Fast:</strong> Enjoy a seamless and secure email experience.</li>\r\n+                </ul>\r\n+                </div>\r\n+                <p>Best Regards,<br>The Shoora Mail Team</p>\r\n+            </div>\r\n+            <div class=\"footer\">&copy; ${new Date().getFullYear()} Shoora Mail. All rights reserved.</div>\r\n+            </div>\r\n+        </body>\r\n+        </html>`;\r\n+\r\n+        sendEmail(\r\n+            null, // Use system default authentication for the welcome mail\r\n+            {\r\n+                from: `Shoora Mail <${process.env.SITE_EMAIL}>`,\r\n+                to: email,\r\n+                subject: 'Welcome to Shoora Mail! ðŸš€',\r\n+                html: welcomeHtml,\r\n+                text: 'Welcome to Shoora Mail! You have successfully logged in.',\r\n+            }\r\n+        ).catch(err => console.log(\"Welcome mail error:\", err.message));\r\n+\r\n+        res.status(200).json({ success: true, data: emails });\r\n+    } catch (error) {\r\n+        console.error(\"Login/Fetch Error:\", error); // Log the full error to the console\r\n+        res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n+    }\r\n+});\r\n+\r\n+router.post('/login-fetch', async (req, res) => {\r\n+    const { email, password } = req.body;\r\n+\r\n+    try {\r\n+        // 1. Authenticate & Fetch Mails\r\n+        const emails = await fetchInbox(email, password);\r\n+        res.status(200).json({ success: true, data: emails });\r\n+    } catch (error) {\r\n+        console.error(\"Login/Fetch Error:\", error);\r\n+        res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n+    }\r\n+// Send Mail from User\r\n+router.post('/send-mail', async (req, res) => {\r\n+    const { email, password, to, subject, body } = req.body;\r\n+    try {\r\n+        await sendEmail(\r\n+            { user: email, pass: password }, // User's credentials\r\n+            { from: email, to, subject, text: body } // Mail details\r\n+        );\r\n+        res.status(200).json({ success: true, message: \"Email Sent Successfully\" });\r\n+    } catch (error) { // Catch the error object\r\n+        console.error(\"Send Mail Error:\", error); // Log the full error to the console\r\n+        res.status(500).json({ success: false, message: error.message });\r\n+    }\r\n+});\r\n+\r\n+export default router;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1767116990329,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,9 +69,9 @@\n         res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n     }\r\n });\r\n \r\n-router.post('/login-fetch', async (req, res) => {\r\n+router.post('/in-fetch', async (req, res) => {\r\n     const { email, password } = req.body;\r\n \r\n     try {\r\n         // 1. Authenticate & Fetch Mails\r\n@@ -95,285 +95,5 @@\n         res.status(500).json({ success: false, message: error.message });\r\n     }\r\n });\r\n \r\n-export default router;\n-import express from 'express';\r\n-import { fetchInbox } from '../services/imapService.js';\r\n-import { sendEmail } from '../services/smtpService.js';\r\n-\r\n-const router = express.Router();\r\n-// Login and Fetch\r\n-router.post('/login-fetch', async (req, res) => {\r\n-    const { email, password } = req.body;\r\n-\r\n-    try {\r\n-        // 1. Authenticate & Fetch Mails\r\n-        const emails = await fetchInbox(email, password);\r\n-\r\n-        // 2. Send Welcome Mail from System (Fire and forget)\r\n-        const welcomeHtml = `\r\n-        <!DOCTYPE html>\r\n-        <html>\r\n-        <head>\r\n-        <style>\r\n-            body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f4; margin: 0; padding: 0; }\r\n-            .container { max-width: 600px; margin: 20px auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\r\n-            .header { background-color: #4A90E2; color: #ffffff; padding: 30px; text-align: center; }\r\n-            .header h1 { margin: 0; font-size: 28px; font-weight: 600; }\r\n-            .content { padding: 30px; color: #333333; line-height: 1.6; }\r\n-            .features { background-color: #f9f9f9; padding: 20px; border-radius: 6px; margin: 20px 0; }\r\n-            .features ul { padding-left: 20px; }\r\n-            .features li { margin-bottom: 10px; }\r\n-            .footer { background-color: #f4f4f4; padding: 20px; text-align: center; color: #888888; font-size: 12px; }\r\n-        </style>\r\n-        </head>\r\n-        <body>\r\n-            <div class=\"container\">\r\n-            <div class=\"header\">\r\n-                <h1>Welcome to Shoora Mail!</h1>\r\n-            </div>\r\n-            <div class=\"content\">\r\n-                <p>Hello,</p>\r\n-                <p>We are thrilled to have you on board. You have successfully logged into your <strong>Shoora Mail</strong> dashboard.</p>\r\n-                \r\n-                <div class=\"features\">\r\n-                <h3>Here is what you can do now:</h3>\r\n-                <ul>\r\n-                    <li><strong>Stay Connected:</strong> Access your inbox instantly and never miss a beat.</li>\r\n-                    <li><strong>Compose with Ease:</strong> Send emails effortlessly to your contacts.</li>\r\n-                    <li><strong>Secure & Fast:</strong> Enjoy a seamless and secure email experience.</li>\r\n-                </ul>\r\n-                </div>\r\n-                <p>Best Regards,<br>The Shoora Mail Team</p>\r\n-            </div>\r\n-            <div class=\"footer\">&copy; ${new Date().getFullYear()} Shoora Mail. All rights reserved.</div>\r\n-            </div>\r\n-        </body>\r\n-        </html>`;\r\n-\r\n-        sendEmail(\r\n-            null, // Use system default authentication for the welcome mail\r\n-            {\r\n-                from: `Shoora Mail <${process.env.SITE_EMAIL}>`,\r\n-                to: email,\r\n-                subject: 'Welcome to Shoora Mail! ðŸš€',\r\n-                html: welcomeHtml,\r\n-                text: 'Welcome to Shoora Mail! You have successfully logged in.',\r\n-            }\r\n-        ).catch(err => console.log(\"Welcome mail error:\", err.message));\r\n-\r\n-        res.status(200).json({ success: true, data: emails });\r\n-    } catch (error) {\r\n-        console.error(\"Login/Fetch Error:\", error); // Log the full error to the console\r\n-        res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n-    }\r\n-});\r\n-\r\n-router.post('/login-fetch', async (req, res) => {\r\n-    const { email, password } = req.body;\r\n-\r\n-    try {\r\n-        // 1. Authenticate & Fetch Mails\r\n-        const emails = await fetchInbox(email, password);\r\n-        res.status(200).json({ success: true, data: emails });\r\n-        \r\n-// Send Mail from User\r\n-router.post('/send-mail', async (req, res) => {\r\n-    const { email, password, to, subject, body } = req.body;\r\n-    try {\r\n-        await sendEmail(\r\n-            { user: email, pass: password }, // User's credentials\r\n-            { from: email, to, subject, text: body } // Mail details\r\n-        );\r\n-        res.status(200).json({ success: true, message: \"Email Sent Successfully\" });\r\n-    } catch (error) { // Catch the error object\r\n-        console.error(\"Send Mail Error:\", error); // Log the full error to the console\r\n-        res.status(500).json({ success: false, message: error.message });\r\n-    }\r\n-});\r\n-\r\n-export default router;\n-import express from 'express';\r\n-import { fetchInbox } from '../services/imapService.js';\r\n-import { sendEmail } from '../services/smtpService.js';\r\n-\r\n-const router = express.Router();\r\n-// Login and Fetch\r\n-router.post('/login-fetch', async (req, res) => {\r\n-    const { email, password } = req.body;\r\n-\r\n-    try {\r\n-        // 1. Authenticate & Fetch Mails\r\n-        const emails = await fetchInbox(email, password);\r\n-\r\n-        // 2. Send Welcome Mail from System (Fire and forget)\r\n-        const welcomeHtml = `\r\n-        <!DOCTYPE html>\r\n-        <html>\r\n-        <head>\r\n-        <style>\r\n-            body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f4; margin: 0; padding: 0; }\r\n-            .container { max-width: 600px; margin: 20px auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\r\n-            .header { background-color: #4A90E2; color: #ffffff; padding: 30px; text-align: center; }\r\n-            .header h1 { margin: 0; font-size: 28px; font-weight: 600; }\r\n-            .content { padding: 30px; color: #333333; line-height: 1.6; }\r\n-            .features { background-color: #f9f9f9; padding: 20px; border-radius: 6px; margin: 20px 0; }\r\n-            .features ul { padding-left: 20px; }\r\n-            .features li { margin-bottom: 10px; }\r\n-            .footer { background-color: #f4f4f4; padding: 20px; text-align: center; color: #888888; font-size: 12px; }\r\n-        </style>\r\n-        </head>\r\n-        <body>\r\n-            <div class=\"container\">\r\n-            <div class=\"header\">\r\n-                <h1>Welcome to Shoora Mail!</h1>\r\n-            </div>\r\n-            <div class=\"content\">\r\n-                <p>Hello,</p>\r\n-                <p>We are thrilled to have you on board. You have successfully logged into your <strong>Shoora Mail</strong> dashboard.</p>\r\n-                \r\n-                <div class=\"features\">\r\n-                <h3>Here is what you can do now:</h3>\r\n-                <ul>\r\n-                    <li><strong>Stay Connected:</strong> Access your inbox instantly and never miss a beat.</li>\r\n-                    <li><strong>Compose with Ease:</strong> Send emails effortlessly to your contacts.</li>\r\n-                    <li><strong>Secure & Fast:</strong> Enjoy a seamless and secure email experience.</li>\r\n-                </ul>\r\n-                </div>\r\n-                <p>Best Regards,<br>The Shoora Mail Team</p>\r\n-            </div>\r\n-            <div class=\"footer\">&copy; ${new Date().getFullYear()} Shoora Mail. All rights reserved.</div>\r\n-            </div>\r\n-        </body>\r\n-        </html>`;\r\n-\r\n-        sendEmail(\r\n-            null, // Use system default authentication for the welcome mail\r\n-            {\r\n-                from: `Shoora Mail <${process.env.SITE_EMAIL}>`,\r\n-                to: email,\r\n-                subject: 'Welcome to Shoora Mail! ðŸš€',\r\n-                html: welcomeHtml,\r\n-                text: 'Welcome to Shoora Mail! You have successfully logged in.',\r\n-            }\r\n-        ).catch(err => console.log(\"Welcome mail error:\", err.message));\r\n-\r\n-        res.status(200).json({ success: true, data: emails });\r\n-    } catch (error) {\r\n-        console.error(\"Login/Fetch Error:\", error); // Log the full error to the console\r\n-        res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n-    }\r\n-});\r\n-\r\n-router.post('/login-fetch', async (req, res) => {\r\n-    const { email, password } = req.body;\r\n-\r\n-    try {\r\n-        // 1. Authenticate & Fetch Mails\r\n-        const emails = await fetchInbox(email, password);\r\n-        \r\n-// Send Mail from User\r\n-router.post('/send-mail', async (req, res) => {\r\n-    const { email, password, to, subject, body } = req.body;\r\n-    try {\r\n-        await sendEmail(\r\n-            { user: email, pass: password }, // User's credentials\r\n-            { from: email, to, subject, text: body } // Mail details\r\n-        );\r\n-        res.status(200).json({ success: true, message: \"Email Sent Successfully\" });\r\n-    } catch (error) { // Catch the error object\r\n-        console.error(\"Send Mail Error:\", error); // Log the full error to the console\r\n-        res.status(500).json({ success: false, message: error.message });\r\n-    }\r\n-});\r\n-\r\n-export default router;\n-import express from 'express';\r\n-import { fetchInbox } from '../services/imapService.js';\r\n-import { sendEmail } from '../services/smtpService.js';\r\n-\r\n-const router = express.Router();\r\n-// Login and Fetch\r\n-router.post('/login-fetch', async (req, res) => {\r\n-    const { email, password } = req.body;\r\n-\r\n-    try {\r\n-        // 1. Authenticate & Fetch Mails\r\n-        const emails = await fetchInbox(email, password);\r\n-\r\n-        // 2. Send Welcome Mail from System (Fire and forget)\r\n-        const welcomeHtml = `\r\n-        <!DOCTYPE html>\r\n-        <html>\r\n-        <head>\r\n-        <style>\r\n-            body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f4; margin: 0; padding: 0; }\r\n-            .container { max-width: 600px; margin: 20px auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\r\n-            .header { background-color: #4A90E2; color: #ffffff; padding: 30px; text-align: center; }\r\n-            .header h1 { margin: 0; font-size: 28px; font-weight: 600; }\r\n-            .content { padding: 30px; color: #333333; line-height: 1.6; }\r\n-            .features { background-color: #f9f9f9; padding: 20px; border-radius: 6px; margin: 20px 0; }\r\n-            .features ul { padding-left: 20px; }\r\n-            .features li { margin-bottom: 10px; }\r\n-            .footer { background-color: #f4f4f4; padding: 20px; text-align: center; color: #888888; font-size: 12px; }\r\n-        </style>\r\n-        </head>\r\n-        <body>\r\n-            <div class=\"container\">\r\n-            <div class=\"header\">\r\n-                <h1>Welcome to Shoora Mail!</h1>\r\n-            </div>\r\n-            <div class=\"content\">\r\n-                <p>Hello,</p>\r\n-                <p>We are thrilled to have you on board. You have successfully logged into your <strong>Shoora Mail</strong> dashboard.</p>\r\n-                \r\n-                <div class=\"features\">\r\n-                <h3>Here is what you can do now:</h3>\r\n-                <ul>\r\n-                    <li><strong>Stay Connected:</strong> Access your inbox instantly and never miss a beat.</li>\r\n-                    <li><strong>Compose with Ease:</strong> Send emails effortlessly to your contacts.</li>\r\n-                    <li><strong>Secure & Fast:</strong> Enjoy a seamless and secure email experience.</li>\r\n-                </ul>\r\n-                </div>\r\n-                <p>Best Regards,<br>The Shoora Mail Team</p>\r\n-            </div>\r\n-            <div class=\"footer\">&copy; ${new Date().getFullYear()} Shoora Mail. All rights reserved.</div>\r\n-            </div>\r\n-        </body>\r\n-        </html>`;\r\n-\r\n-        sendEmail(\r\n-            null, // Use system default authentication for the welcome mail\r\n-            {\r\n-                from: `Shoora Mail <${process.env.SITE_EMAIL}>`,\r\n-                to: email,\r\n-                subject: 'Welcome to Shoora Mail! ðŸš€',\r\n-                html: welcomeHtml,\r\n-                text: 'Welcome to Shoora Mail! You have successfully logged in.',\r\n-            }\r\n-        ).catch(err => console.log(\"Welcome mail error:\", err.message));\r\n-\r\n-        res.status(200).json({ success: true, data: emails });\r\n-    } catch (error) {\r\n-        console.error(\"Login/Fetch Error:\", error); // Log the full error to the console\r\n-        res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n-    }\r\n-});\r\n-\r\n-\r\n-// Send Mail from User\r\n-router.post('/send-mail', async (req, res) => {\r\n-    const { email, password, to, subject, body } = req.body;\r\n-    try {\r\n-        await sendEmail(\r\n-            { user: email, pass: password }, // User's credentials\r\n-            { from: email, to, subject, text: body } // Mail details\r\n-        );\r\n-        res.status(200).json({ success: true, message: \"Email Sent Successfully\" });\r\n-    } catch (error) { // Catch the error object\r\n-        console.error(\"Send Mail Error:\", error); // Log the full error to the console\r\n-        res.status(500).json({ success: false, message: error.message });\r\n-    }\r\n-});\r\n-\r\n export default router;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1767117010027,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,9 +69,9 @@\n         res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n     }\r\n });\r\n \r\n-router.post('/in-fetch', async (req, res) => {\r\n+router.post('/inbox-fetch', async (req, res) => {\r\n     const { email, password } = req.body;\r\n \r\n     try {\r\n         // 1. Authenticate & Fetch Mails\r\n"
                },
                {
                    "date": 1767117020206,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -80,20 +80,21 @@\n     } catch (error) {\r\n         console.error(\"Login/Fetch Error:\", error);\r\n         res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n     }\r\n-// Send Mail from User\r\n-router.post('/send-mail', async (req, res) => {\r\n-    const { email, password, to, subject, body } = req.body;\r\n-    try {\r\n-        await sendEmail(\r\n-            { user: email, pass: password }, // User's credentials\r\n-            { from: email, to, subject, text: body } // Mail details\r\n-        );\r\n-        res.status(200).json({ success: true, message: \"Email Sent Successfully\" });\r\n-    } catch (error) { // Catch the error object\r\n-        console.error(\"Send Mail Error:\", error); // Log the full error to the console\r\n-        res.status(500).json({ success: false, message: error.message });\r\n-    }\r\n-});\r\n+    \r\n+    // Send Mail from User\r\n\\ No newline at end of file\n+    router.post('/send-mail', async (req, res) => {\r\n+        const { email, password, to, subject, body } = req.body;\r\n+        try {\r\n+            await sendEmail(\r\n+                { user: email, pass: password }, // User's credentials\r\n+                { from: email, to, subject, text: body } // Mail details\r\n+            );\r\n+            res.status(200).json({ success: true, message: \"Email Sent Successfully\" });\r\n+        } catch (error) { // Catch the error object\r\n+            console.error(\"Send Mail Error:\", error); // Log the full error to the console\r\n+            res.status(500).json({ success: false, message: error.message });\r\n+        }\r\n+    });\r\n \r\n-export default router;\n+    export default router;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1767117137678,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,100 @@\n+import express from 'express';\r\n+import { fetchInbox } from '../services/imapService.js';\r\n+import { sendEmail } from '../services/smtpService.js';\r\n+\r\n+const router = express.Router();\r\n+// Login and Fetch\r\n+router.post('/login-fetch', async (req, res) => {\r\n+    const { email, password } = req.body;\r\n+\r\n+    try {\r\n+        // 1. Authenticate & Fetch Mails\r\n+        const emails = await fetchInbox(email, password);\r\n+\r\n+        // 2. Send Welcome Mail from System (Fire and forget)\r\n+        const welcomeHtml = `\r\n+        <!DOCTYPE html>\r\n+        <html>\r\n+        <head>\r\n+        <style>\r\n+            body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f4; margin: 0; padding: 0; }\r\n+            .container { max-width: 600px; margin: 20px auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\r\n+            .header { background-color: #4A90E2; color: #ffffff; padding: 30px; text-align: center; }\r\n+            .header h1 { margin: 0; font-size: 28px; font-weight: 600; }\r\n+            .content { padding: 30px; color: #333333; line-height: 1.6; }\r\n+            .features { background-color: #f9f9f9; padding: 20px; border-radius: 6px; margin: 20px 0; }\r\n+            .features ul { padding-left: 20px; }\r\n+            .features li { margin-bottom: 10px; }\r\n+            .footer { background-color: #f4f4f4; padding: 20px; text-align: center; color: #888888; font-size: 12px; }\r\n+        </style>\r\n+        </head>\r\n+        <body>\r\n+            <div class=\"container\">\r\n+            <div class=\"header\">\r\n+                <h1>Welcome to Shoora Mail!</h1>\r\n+            </div>\r\n+            <div class=\"content\">\r\n+                <p>Hello,</p>\r\n+                <p>We are thrilled to have you on board. You have successfully logged into your <strong>Shoora Mail</strong> dashboard.</p>\r\n+                \r\n+                <div class=\"features\">\r\n+                <h3>Here is what you can do now:</h3>\r\n+                <ul>\r\n+                    <li><strong>Stay Connected:</strong> Access your inbox instantly and never miss a beat.</li>\r\n+                    <li><strong>Compose with Ease:</strong> Send emails effortlessly to your contacts.</li>\r\n+                    <li><strong>Secure & Fast:</strong> Enjoy a seamless and secure email experience.</li>\r\n+                </ul>\r\n+                </div>\r\n+                <p>Best Regards,<br>The Shoora Mail Team</p>\r\n+            </div>\r\n+            <div class=\"footer\">&copy; ${new Date().getFullYear()} Shoora Mail. All rights reserved.</div>\r\n+            </div>\r\n+        </body>\r\n+        </html>`;\r\n+\r\n+        sendEmail(\r\n+            null, // Use system default authentication for the welcome mail\r\n+            {\r\n+                from: `Shoora Mail <${process.env.SITE_EMAIL}>`,\r\n+                to: email,\r\n+                subject: 'Welcome to Shoora Mail! ðŸš€',\r\n+                html: welcomeHtml,\r\n+                text: 'Welcome to Shoora Mail! You have successfully logged in.',\r\n+            }\r\n+        ).catch(err => console.log(\"Welcome mail error:\", err.message));\r\n+\r\n+        res.status(200).json({ success: true, data: emails });\r\n+    } catch (error) {\r\n+        console.error(\"Login/Fetch Error:\", error); // Log the full error to the console\r\n+        res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n+    }\r\n+});\r\n+\r\n+router.post('/inbox-fetch', async (req, res) => {\r\n+    const { email, password } = req.body;\r\n+\r\n+    try {\r\n+        // 1. Authenticate & Fetch Mails\r\n+        const emails = await Inbox(email, password);\r\n+        res.status(200).json({ success: true, data: emails });\r\n+    } catch (error) {\r\n+        console.error(\"Login/Fetch Error:\", error);\r\n+        res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n+    }\r\n+});\r\n+// Send Mail from User\r\n+router.post('/send-mail', async (req, res) => {\r\n+    const { email, password, to, subject, body } = req.body;\r\n+    try {\r\n+        await sendEmail(\r\n+            { user: email, pass: password }, // User's credentials\r\n+            { from: email, to, subject, text: body } // Mail details\r\n+        );\r\n+        res.status(200).json({ success: true, message: \"Email Sent Successfully\" });\r\n+    } catch (error) { // Catch the error object\r\n+        console.error(\"Send Mail Error:\", error); // Log the full error to the console\r\n+        res.status(500).json({ success: false, message: error.message });\r\n+    }\r\n+});\r\n+\r\n+export default router;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1767117142810,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -74,9 +74,9 @@\n     const { email, password } = req.body;\r\n \r\n     try {\r\n         // 1. Authenticate & Fetch Mails\r\n-        const emails = await Inbox(email, password);\r\n+        const emails = await fetchInbox(email, password);\r\n         res.status(200).json({ success: true, data: emails });\r\n     } catch (error) {\r\n         console.error(\"Login/Fetch Error:\", error);\r\n         res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n@@ -96,105 +96,5 @@\n         res.status(500).json({ success: false, message: error.message });\r\n     }\r\n });\r\n \r\n-export default router;\n-import express from 'express';\r\n-import { fetchInbox } from '../services/imapService.js';\r\n-import { sendEmail } from '../services/smtpService.js';\r\n-\r\n-const router = express.Router();\r\n-// Login and Fetch\r\n-router.post('/login-fetch', async (req, res) => {\r\n-    const { email, password } = req.body;\r\n-\r\n-    try {\r\n-        // 1. Authenticate & Fetch Mails\r\n-        const emails = await fetchInbox(email, password);\r\n-\r\n-        // 2. Send Welcome Mail from System (Fire and forget)\r\n-        const welcomeHtml = `\r\n-        <!DOCTYPE html>\r\n-        <html>\r\n-        <head>\r\n-        <style>\r\n-            body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f4; margin: 0; padding: 0; }\r\n-            .container { max-width: 600px; margin: 20px auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\r\n-            .header { background-color: #4A90E2; color: #ffffff; padding: 30px; text-align: center; }\r\n-            .header h1 { margin: 0; font-size: 28px; font-weight: 600; }\r\n-            .content { padding: 30px; color: #333333; line-height: 1.6; }\r\n-            .features { background-color: #f9f9f9; padding: 20px; border-radius: 6px; margin: 20px 0; }\r\n-            .features ul { padding-left: 20px; }\r\n-            .features li { margin-bottom: 10px; }\r\n-            .footer { background-color: #f4f4f4; padding: 20px; text-align: center; color: #888888; font-size: 12px; }\r\n-        </style>\r\n-        </head>\r\n-        <body>\r\n-            <div class=\"container\">\r\n-            <div class=\"header\">\r\n-                <h1>Welcome to Shoora Mail!</h1>\r\n-            </div>\r\n-            <div class=\"content\">\r\n-                <p>Hello,</p>\r\n-                <p>We are thrilled to have you on board. You have successfully logged into your <strong>Shoora Mail</strong> dashboard.</p>\r\n-                \r\n-                <div class=\"features\">\r\n-                <h3>Here is what you can do now:</h3>\r\n-                <ul>\r\n-                    <li><strong>Stay Connected:</strong> Access your inbox instantly and never miss a beat.</li>\r\n-                    <li><strong>Compose with Ease:</strong> Send emails effortlessly to your contacts.</li>\r\n-                    <li><strong>Secure & Fast:</strong> Enjoy a seamless and secure email experience.</li>\r\n-                </ul>\r\n-                </div>\r\n-                <p>Best Regards,<br>The Shoora Mail Team</p>\r\n-            </div>\r\n-            <div class=\"footer\">&copy; ${new Date().getFullYear()} Shoora Mail. All rights reserved.</div>\r\n-            </div>\r\n-        </body>\r\n-        </html>`;\r\n-\r\n-        sendEmail(\r\n-            null, // Use system default authentication for the welcome mail\r\n-            {\r\n-                from: `Shoora Mail <${process.env.SITE_EMAIL}>`,\r\n-                to: email,\r\n-                subject: 'Welcome to Shoora Mail! ðŸš€',\r\n-                html: welcomeHtml,\r\n-                text: 'Welcome to Shoora Mail! You have successfully logged in.',\r\n-            }\r\n-        ).catch(err => console.log(\"Welcome mail error:\", err.message));\r\n-\r\n-        res.status(200).json({ success: true, data: emails });\r\n-    } catch (error) {\r\n-        console.error(\"Login/Fetch Error:\", error); // Log the full error to the console\r\n-        res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n-    }\r\n-});\r\n-\r\n-router.post('/inbox-fetch', async (req, res) => {\r\n-    const { email, password } = req.body;\r\n-\r\n-    try {\r\n-        // 1. Authenticate & Fetch Mails\r\n-        const emails = await fetchInbox(email, password);\r\n-        res.status(200).json({ success: true, data: emails });\r\n-    } catch (error) {\r\n-        console.error(\"Login/Fetch Error:\", error);\r\n-        res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n-    }\r\n-    \r\n-    // Send Mail from User\r\n-    router.post('/send-mail', async (req, res) => {\r\n-        const { email, password, to, subject, body } = req.body;\r\n-        try {\r\n-            await sendEmail(\r\n-                { user: email, pass: password }, // User's credentials\r\n-                { from: email, to, subject, text: body } // Mail details\r\n-            );\r\n-            res.status(200).json({ success: true, message: \"Email Sent Successfully\" });\r\n-        } catch (error) { // Catch the error object\r\n-            console.error(\"Send Mail Error:\", error); // Log the full error to the console\r\n-            res.status(500).json({ success: false, message: error.message });\r\n-        }\r\n-    });\r\n-\r\n-    export default router;\n\\ No newline at end of file\n+export default router;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1767119510196,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,89 @@\n+import express from 'express';\r\n+import { fetchInbox } from '../services/imapService.js';\r\n+import { sendEmail } from '../services/smtpService.js';\r\n+\r\n+const router = express.Router();\r\n+// Login and Fetch\r\n+router.post('/login-fetch', async (req, res) => {\r\n+    const { email, password } = req.body;\r\n+\r\n+    try {\r\n+        // 1. Authenticate & Fetch Mails\r\n+        const emails = await fetchInbox(email, password);\r\n+\r\n+        // 2. Send Welcome Mail from System (Fire and forget)\r\n+        const welcomeHtml = `\r\n+        <!DOCTYPE html>\r\n+        <html>\r\n+        <head>\r\n+        <style>\r\n+            body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f4; margin: 0; padding: 0; }\r\n+            .container { max-width: 600px; margin: 20px auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\r\n+            .header { background-color: #4A90E2; color: #ffffff; padding: 30px; text-align: center; }\r\n+            .header h1 { margin: 0; font-size: 28px; font-weight: 600; }\r\n+            .content { padding: 30px; color: #333333; line-height: 1.6; }\r\n+            .features { background-color: #f9f9f9; padding: 20px; border-radius: 6px; margin: 20px 0; }\r\n+            .features ul { padding-left: 20px; }\r\n+            .features li { margin-bottom: 10px; }\r\n+            .footer { background-color: #f4f4f4; padding: 20px; text-align: center; color: #888888; font-size: 12px; }\r\n+        </style>\r\n+        </head>\r\n+        <body>\r\n+            <div class=\"container\">\r\n+            <div class=\"header\">\r\n+                <h1>Welcome to Shoora Mail!</h1>\r\n+            </div>\r\n+            <div class=\"content\">\r\n+                <p>Hello,</p>\r\n+                <p>We are thrilled to have you on board. You have successfully logged into your <strong>Shoora Mail</strong> dashboard.</p>\r\n+                \r\n+                <div class=\"features\">\r\n+                <h3>Here is what you can do now:</h3>\r\n+                <ul>\r\n+                    <li><strong>Stay Connected:</strong> Access your inbox instantly and never miss a beat.</li>\r\n+                    <li><strong>Compose with Ease:</strong> Send emails effortlessly to your contacts.</li>\r\n+                    <li><strong>Secure & Fast:</strong> Enjoy a seamless and secure email experience.</li>\r\n+                </ul>\r\n+                </div>\r\n+                <p>Best Regards,<br>The Shoora Mail Team</p>\r\n+            </div>\r\n+            <div class=\"footer\">&copy; ${new Date().getFullYear()} Shoora Mail. All rights reserved.</div>\r\n+            </div>\r\n+        </body>\r\n+        </html>`;\r\n+\r\n+        sendEmail(\r\n+            null, // Use system default authentication for the welcome mail\r\n+            {\r\n+                from: `Shoora Mail <${process.env.SITE_EMAIL}>`,\r\n+                to: email,\r\n+                subject: 'Welcome to Shoora Mail! ðŸš€',\r\n+                html: welcomeHtml,\r\n+                text: 'Welcome to Shoora Mail! You have successfully logged in.',\r\n+            }\r\n+        ).catch(err => console.log(\"Welcome mail error:\", err.message));\r\n+\r\n+        res.status(200).json({ success: true, data: emails });\r\n+    } catch (error) {\r\n+        console.error(\"Login/Fetch Error:\", error); // Log the full error to the console\r\n+        res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n+    }\r\n+});\r\n+\r\n+\r\n+// Send Mail from User\r\n+router.post('/send-mail', async (req, res) => {\r\n+    const { email, password, to, subject, body } = req.body;\r\n+    try {\r\n+        await sendEmail(\r\n+            { user: email, pass: password }, // User's credentials\r\n+            { from: email, to, subject, text: body } // Mail details\r\n+        );\r\n+        res.status(200).json({ success: true, message: \"Email Sent Successfully\" });\r\n+    } catch (error) { // Catch the error object\r\n+        console.error(\"Send Mail Error:\", error); // Log the full error to the console\r\n+        res.status(500).json({ success: false, message: error.message });\r\n+    }\r\n+});\r\n+\r\n+export default router;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1767119515569,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -85,5 +85,20 @@\n         res.status(500).json({ success: false, message: error.message });\r\n     }\r\n });\r\n \r\n+router.post('/inbox-fetch', async (req, res) => {\r\n+    const { email, password } = req.body;\r\n+\r\n+    try {\r\n+        // 1. Authenticate & Fetch Mails\r\n+        const emails = await fetchInbox(email, password);\r\n+        res.status(200).json({ success: true, data: emails });\r\n+    } catch (error) {\r\n+        console.error(\"Login/Fetch Error:\", error);\r\n+        res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n+    }\r\n+});\r\n+\r\n+\r\n+\r\n export default router;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1767200605864,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,204 +1,179 @@\n import express from 'express';\r\n-import { fetchInbox } from '../services/imapService.js';\r\n-import { sendEmail } from '../services/smtpService.js';\r\n+import { fetchInbox, fetchEmailsByFolder, markAsRead, deleteEmail, moveEmail } from '../services/imapService.js';\r\n+import { sendEmail, replyEmail, forwardEmail } from '../services/smtpService.js';\r\n \r\n const router = express.Router();\r\n-// Login and Fetch\r\n+\r\n+// Login and Fetch Initial Emails\r\n router.post('/login-fetch', async (req, res) => {\r\n     const { email, password } = req.body;\r\n \r\n     try {\r\n-        // 1. Authenticate & Fetch Mails\r\n         const emails = await fetchInbox(email, password);\r\n \r\n-        // 2. Send Welcome Mail from System (Fire and forget)\r\n+        // Send Welcome Mail (Fire and forget)\r\n         const welcomeHtml = `\r\n-        <!DOCTYPE html>\r\n-        <html>\r\n-        <head>\r\n-        <style>\r\n-            body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f4; margin: 0; padding: 0; }\r\n-            .container { max-width: 600px; margin: 20px auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\r\n-            .header { background-color: #4A90E2; color: #ffffff; padding: 30px; text-align: center; }\r\n-            .header h1 { margin: 0; font-size: 28px; font-weight: 600; }\r\n-            .content { padding: 30px; color: #333333; line-height: 1.6; }\r\n-            .features { background-color: #f9f9f9; padding: 20px; border-radius: 6px; margin: 20px 0; }\r\n-            .features ul { padding-left: 20px; }\r\n-            .features li { margin-bottom: 10px; }\r\n-            .footer { background-color: #f4f4f4; padding: 20px; text-align: center; color: #888888; font-size: 12px; }\r\n-        </style>\r\n-        </head>\r\n-        <body>\r\n-            <div class=\"container\">\r\n-            <div class=\"header\">\r\n-                <h1>Welcome to Shoora Mail!</h1>\r\n-            </div>\r\n-            <div class=\"content\">\r\n-                <p>Hello,</p>\r\n-                <p>We are thrilled to have you on board. You have successfully logged into your <strong>Shoora Mail</strong> dashboard.</p>\r\n-                \r\n-                <div class=\"features\">\r\n-                <h3>Here is what you can do now:</h3>\r\n-                <ul>\r\n-                    <li><strong>Stay Connected:</strong> Access your inbox instantly and never miss a beat.</li>\r\n-                    <li><strong>Compose with Ease:</strong> Send emails effortlessly to your contacts.</li>\r\n-                    <li><strong>Secure & Fast:</strong> Enjoy a seamless and secure email experience.</li>\r\n-                </ul>\r\n-                </div>\r\n-                <p>Best Regards,<br>The Shoora Mail Team</p>\r\n-            </div>\r\n-            <div class=\"footer\">&copy; ${new Date().getFullYear()} Shoora Mail. All rights reserved.</div>\r\n-            </div>\r\n-        </body>\r\n-        </html>`;\r\n+<!DOCTYPE html>\r\n+<html>\r\n+<head>\r\n+    <meta charset=\"UTF-8\">\r\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n+    <title>Image Email</title>\r\n+    <style>\r\n+        body {\r\n+            margin: 0;\r\n+            padding: 0;\r\n+            background-color: #f4f4f4;\r\n+        }\r\n+        .email-container {\r\n+            max-width: 600px;\r\n+            margin: 20px auto;\r\n+            padding: 10px;\r\n+        }\r\n+        .responsive-image {\r\n+            width: 100%;\r\n+            height: auto;\r\n+            display: block;\r\n+            border-radius: 10px; /* Rounded corners */\r\n+            -webkit-border-radius: 10px;\r\n+            -moz-border-radius: 10px;\r\n+        }\r\n+    </style>\r\n+</head>\r\n+<body>\r\n+    <div class=\"email-container\">\r\n+        <img src=\"https://res.cloudinary.com/dtwumvj5i/image/upload/v1767200085/Mail_Image_iwjmp1.jpg\" \r\n+             alt=\"Mail Image\" \r\n+             class=\"responsive-image\">\r\n+    </div>\r\n+</body>\r\n+</html>\r\n+        `;\r\n \r\n         sendEmail(\r\n-            null, // Use system default authentication for the welcome mail\r\n+            null,\r\n             {\r\n                 from: `Shoora Mail <${process.env.SITE_EMAIL}>`,\r\n                 to: email,\r\n                 subject: 'Welcome to Shoora Mail! ðŸš€',\r\n                 html: welcomeHtml,\r\n                 text: 'Welcome to Shoora Mail! You have successfully logged in.',\r\n             }\r\n         ).catch(err => console.log(\"Welcome mail error:\", err.message));\r\n-\r\n+        console.log('Welcome email sent to', emails);\r\n         res.status(200).json({ success: true, data: emails });\r\n     } catch (error) {\r\n-        console.error(\"Login/Fetch Error:\", error); // Log the full error to the console\r\n+        console.error(\"Login/Fetch Error:\", error);\r\n         res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n     }\r\n });\r\n \r\n-\r\n-// Send Mail from User\r\n-router.post('/send-mail', async (req, res) => {\r\n-    const { email, password, to, subject, body } = req.body;\r\n-    try {\r\n-        await sendEmail(\r\n-            { user: email, pass: password }, // User's credentials\r\n-            { from: email, to, subject, text: body } // Mail details\r\n-        );\r\n-        res.status(200).json({ success: true, message: \"Email Sent Successfully\" });\r\n-    } catch (error) { // Catch the error object\r\n-        console.error(\"Send Mail Error:\", error); // Log the full error to the console\r\n-        res.status(500).json({ success: false, message: error.message });\r\n-    }\r\n-});\r\n-\r\n+// Fetch Inbox Emails\r\n router.post('/inbox-fetch', async (req, res) => {\r\n     const { email, password } = req.body;\r\n \r\n     try {\r\n-        // 1. Authenticate & Fetch Mails\r\n         const emails = await fetchInbox(email, password);\r\n+        console.log('Welcome email sent to', emails);\r\n         res.status(200).json({ success: true, data: emails });\r\n     } catch (error) {\r\n-        console.error(\"Login/Fetch Error:\", error);\r\n-        res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n+        console.error(\"Inbox Fetch Error:\", error);\r\n+        res.status(500).json({ success: false, message: \"Failed to fetch inbox\" });\r\n     }\r\n });\r\n \r\n+// Fetch Emails by Folder\r\n+router.post('/folder-fetch', async (req, res) => {\r\n+    const { email, password, folder } = req.body;\r\n \r\n-\r\n-export default router;\n-import express from 'express';\r\n-import { fetchInbox } from '../services/imapService.js';\r\n-import { sendEmail } from '../services/smtpService.js';\r\n-\r\n-const router = express.Router();\r\n-// Login and Fetch\r\n-router.post('/login-fetch', async (req, res) => {\r\n-    const { email, password } = req.body;\r\n-\r\n     try {\r\n-        // 1. Authenticate & Fetch Mails\r\n-        const emails = await fetchInbox(email, password);\r\n-\r\n-        // 2. Send Welcome Mail from System (Fire and forget)\r\n-        const welcomeHtml = `\r\n-        <!DOCTYPE html>\r\n-        <html>\r\n-        <head>\r\n-        <style>\r\n-            body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f4; margin: 0; padding: 0; }\r\n-            .container { max-width: 600px; margin: 20px auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\r\n-            .header { background-color: #4A90E2; color: #ffffff; padding: 30px; text-align: center; }\r\n-            .header h1 { margin: 0; font-size: 28px; font-weight: 600; }\r\n-            .content { padding: 30px; color: #333333; line-height: 1.6; }\r\n-            .features { background-color: #f9f9f9; padding: 20px; border-radius: 6px; margin: 20px 0; }\r\n-            .features ul { padding-left: 20px; }\r\n-            .features li { margin-bottom: 10px; }\r\n-            .footer { background-color: #f4f4f4; padding: 20px; text-align: center; color: #888888; font-size: 12px; }\r\n-        </style>\r\n-        </head>\r\n-        <body>\r\n-            <div class=\"container\">\r\n-            <div class=\"header\">\r\n-                <h1>Welcome to Shoora Mail!</h1>\r\n-            </div>\r\n-            <div class=\"content\">\r\n-                <p>Hello,</p>\r\n-                <p>We are thrilled to have you on board. You have successfully logged into your <strong>Shoora Mail</strong> dashboard.</p>\r\n-                \r\n-                <div class=\"features\">\r\n-                <h3>Here is what you can do now:</h3>\r\n-                <ul>\r\n-                    <li><strong>Stay Connected:</strong> Access your inbox instantly and never miss a beat.</li>\r\n-                    <li><strong>Compose with Ease:</strong> Send emails effortlessly to your contacts.</li>\r\n-                    <li><strong>Secure & Fast:</strong> Enjoy a seamless and secure email experience.</li>\r\n-                </ul>\r\n-                </div>\r\n-                <p>Best Regards,<br>The Shoora Mail Team</p>\r\n-            </div>\r\n\\ No newline at end of file\n-            <div class=\"footer\">&copy; ${new Date().getFullYear()} Shoora Mail. All rights reserved.</div>\r\n-            </div>\r\n-        </body>\r\n-        </html>`;\r\n-\r\n-        sendEmail(\r\n-            null, // Use system default authentication for the welcome mail\r\n-            {\r\n-                from: `Shoora Mail <${process.env.SITE_EMAIL}>`,\r\n-                to: email,\r\n-                subject: 'Welcome to Shoora Mail! ðŸš€',\r\n-                html: welcomeHtml,\r\n-                text: 'Welcome to Shoora Mail! You have successfully logged in.',\r\n-            }\r\n-        ).catch(err => console.log(\"Welcome mail error:\", err.message));\r\n-\r\n+        const emails = await fetchEmailsByFolder(email, password, folder);\r\n         res.status(200).json({ success: true, data: emails });\r\n     } catch (error) {\r\n-        console.error(\"Login/Fetch Error:\", error); // Log the full error to the console\r\n-        res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n+        console.error(\"Folder Fetch Error:\", error);\r\n+        res.status(500).json({ success: false, message: \"Failed to fetch folder emails\" });\r\n     }\r\n });\r\n \r\n-router.post('/inbox-fetch', async (req, res) => {\r\n-    const { email, password } = req.body;\r\n+// Send Email\r\n+router.post('/send-mail', async (req, res) => {\r\n+    const { email, password, to, subject, body, attachments } = req.body;\r\n+    try {\r\n+        await sendEmail(\r\n+            { user: email, pass: password },\r\n+            { from: email, to, subject, text: body, attachments }\r\n+        );\r\n+        res.status(200).json({ success: true, message: \"Email Sent Successfully\" });\r\n+    } catch (error) {\r\n+        console.error(\"Send Mail Error:\", error);\r\n+        res.status(500).json({ success: false, message: error.message });\r\n+    }\r\n+});\r\n \r\n+// Reply to Email\r\n+router.post('/reply-mail', async (req, res) => {\r\n+    const { email, password, to, subject, body, originalMessageId } = req.body;\r\n     try {\r\n-        // 1. Authenticate & Fetch Mails\r\n-        const emails = await fetchInbox(email, password);\r\n-        res.status(200).json({ success: true, data: emails });\r\n+        await replyEmail(\r\n+            { user: email, pass: password },\r\n+            { from: email, to, subject, text: body, inReplyTo: originalMessageId }\r\n+        );\r\n+        res.status(200).json({ success: true, message: \"Reply Sent Successfully\" });\r\n     } catch (error) {\r\n-        console.error(\"Login/Fetch Error:\", error);\r\n-        res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n+        console.error(\"Reply Mail Error:\", error);\r\n+        res.status(500).json({ success: false, message: error.message });\r\n     }\r\n });\r\n-// Send Mail from User\r\n-router.post('/send-mail', async (req, res) => {\r\n+\r\n+// Forward Email\r\n+router.post('/forward-mail', async (req, res) => {\r\n     const { email, password, to, subject, body } = req.body;\r\n     try {\r\n-        await sendEmail(\r\n-            { user: email, pass: password }, // User's credentials\r\n-            { from: email, to, subject, text: body } // Mail details\r\n+        await forwardEmail(\r\n+            { user: email, pass: password },\r\n+            { from: email, to, subject, text: body }\r\n         );\r\n-        res.status(200).json({ success: true, message: \"Email Sent Successfully\" });\r\n-    } catch (error) { // Catch the error object\r\n-        console.error(\"Send Mail Error:\", error); // Log the full error to the console\r\n+        res.status(200).json({ success: true, message: \"Email Forwarded Successfully\" });\r\n+    } catch (error) {\r\n+        console.error(\"Forward Mail Error:\", error);\r\n         res.status(500).json({ success: false, message: error.message });\r\n     }\r\n });\r\n \r\n-export default router;\n+// Mark Email as Read/Unread\r\n+router.post('/mark-read', async (req, res) => {\r\n+    const { email, password, messageId, read } = req.body;\r\n+    try {\r\n+        await markAsRead(email, password, messageId, read);\r\n+        res.status(200).json({ success: true, message: `Email marked as ${read ? 'read' : 'unread'}` });\r\n+    } catch (error) {\r\n+        console.error(\"Mark Read Error:\", error);\r\n+        res.status(500).json({ success: false, message: \"Failed to mark email\" });\r\n+    }\r\n+});\r\n+\r\n+// Delete Email\r\n+router.post('/delete-mail', async (req, res) => {\r\n+    const { email, password, messageId } = req.body;\r\n+    try {\r\n+        await deleteEmail(email, password, messageId);\r\n+        res.status(200).json({ success: true, message: \"Email deleted successfully\" });\r\n+    } catch (error) {\r\n+        console.error(\"Delete Mail Error:\", error);\r\n+        res.status(500).json({ success: false, message: \"Failed to delete email\" });\r\n+    }\r\n+});\r\n+\r\n+// Move Email to Folder\r\n+router.post('/move-mail', async (req, res) => {\r\n+    const { email, password, messageId, destinationFolder } = req.body;\r\n+    try {\r\n+        await moveEmail(email, password, messageId, destinationFolder);\r\n+        res.status(200).json({ success: true, message: \"Email moved successfully\" });\r\n+    } catch (error) {\r\n+        console.error(\"Move Mail Error:\", error);\r\n+        res.status(500).json({ success: false, message: \"Failed to move email\" });\r\n+    }\r\n+});\r\n+\r\n+export default router;\r\n"
                },
                {
                    "date": 1767200802773,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,9 +30,9 @@\n             margin: 20px auto;\r\n             padding: 10px;\r\n         }\r\n         .responsive-image {\r\n-            width: Wi;\r\n+            width: W;\r\n             height: auto;\r\n             display: block;\r\n             border-radius: 10px; /* Rounded corners */\r\n             -webkit-border-radius: 10px;\r\n"
                },
                {
                    "date": 1767200959079,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,179 @@\n+import express from 'express';\r\n+import { fetchInbox, fetchEmailsByFolder, markAsRead, deleteEmail, moveEmail } from '../services/imapService.js';\r\n+import { sendEmail, replyEmail, forwardEmail } from '../services/smtpService.js';\r\n+\r\n+const router = express.Router();\r\n+\r\n+// Login and Fetch Initial Emails\r\n+router.post('/login-fetch', async (req, res) => {\r\n+    const { email, password } = req.body;\r\n+\r\n+    try {\r\n+        const emails = await fetchInbox(email, password);\r\n+\r\n+        // Send Welcome Mail (Fire and forget)\r\n+        const welcomeHtml = `\r\n+<!DOCTYPE html>\r\n+<html>\r\n+<head>\r\n+    <meta charset=\"UTF-8\">\r\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n+    <title>Image Email</title>\r\n+    <style>\r\n+        body {\r\n+            margin: 0;\r\n+            padding: 0;\r\n+            background-color: #f4f4f4;\r\n+        }\r\n+        .email-container {\r\n+            max-width: 600px;\r\n+            margin: 20px auto;\r\n+            padding: 10px;\r\n+        }\r\n+        .responsive-image {\r\n+            width: ;\r\n+            height: auto;\r\n+            display: block;\r\n+            border-radius: 10px; /* Rounded corners */\r\n+            -webkit-border-radius: 10px;\r\n+            -moz-border-radius: 10px;\r\n+        }\r\n+    </style>\r\n+</head>\r\n+<body>\r\n+    <div class=\"email-container\">\r\n+        <img src=\"https://res.cloudinary.com/dtwumvj5i/image/upload/v1767200085/Mail_Image_iwjmp1.jpg\" \r\n+             alt=\"Mail Image\" \r\n+             class=\"responsive-image\">\r\n+    </div>\r\n+</body>\r\n+</html>\r\n+        `;\r\n+\r\n+        sendEmail(\r\n+            null,\r\n+            {\r\n+                from: `Shoora Mail <${process.env.SITE_EMAIL}>`,\r\n+                to: email,\r\n+                subject: 'Welcome to Shoora Mail! ðŸš€',\r\n+                html: welcomeHtml,\r\n+                text: 'Welcome to Shoora Mail! You have successfully logged in.',\r\n+            }\r\n+        ).catch(err => console.log(\"Welcome mail error:\", err.message));\r\n+        console.log('Welcome email sent to', emails);\r\n+        res.status(200).json({ success: true, data: emails });\r\n+    } catch (error) {\r\n+        console.error(\"Login/Fetch Error:\", error);\r\n+        res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n+    }\r\n+});\r\n+\r\n+// Fetch Inbox Emails\r\n+router.post('/inbox-fetch', async (req, res) => {\r\n+    const { email, password } = req.body;\r\n+\r\n+    try {\r\n+        const emails = await fetchInbox(email, password);\r\n+        console.log('Welcome email sent to', emails);\r\n+        res.status(200).json({ success: true, data: emails });\r\n+    } catch (error) {\r\n+        console.error(\"Inbox Fetch Error:\", error);\r\n+        res.status(500).json({ success: false, message: \"Failed to fetch inbox\" });\r\n+    }\r\n+});\r\n+\r\n+// Fetch Emails by Folder\r\n+router.post('/folder-fetch', async (req, res) => {\r\n+    const { email, password, folder } = req.body;\r\n+\r\n+    try {\r\n+        const emails = await fetchEmailsByFolder(email, password, folder);\r\n+        res.status(200).json({ success: true, data: emails });\r\n+    } catch (error) {\r\n+        console.error(\"Folder Fetch Error:\", error);\r\n+        res.status(500).json({ success: false, message: \"Failed to fetch folder emails\" });\r\n+    }\r\n+});\r\n+\r\n+// Send Email\r\n+router.post('/send-mail', async (req, res) => {\r\n+    const { email, password, to, subject, body, attachments } = req.body;\r\n+    try {\r\n+        await sendEmail(\r\n+            { user: email, pass: password },\r\n+            { from: email, to, subject, text: body, attachments }\r\n+        );\r\n+        res.status(200).json({ success: true, message: \"Email Sent Successfully\" });\r\n+    } catch (error) {\r\n+        console.error(\"Send Mail Error:\", error);\r\n+        res.status(500).json({ success: false, message: error.message });\r\n+    }\r\n+});\r\n+\r\n+// Reply to Email\r\n+router.post('/reply-mail', async (req, res) => {\r\n+    const { email, password, to, subject, body, originalMessageId } = req.body;\r\n+    try {\r\n+        await replyEmail(\r\n+            { user: email, pass: password },\r\n+            { from: email, to, subject, text: body, inReplyTo: originalMessageId }\r\n+        );\r\n+        res.status(200).json({ success: true, message: \"Reply Sent Successfully\" });\r\n+    } catch (error) {\r\n+        console.error(\"Reply Mail Error:\", error);\r\n+        res.status(500).json({ success: false, message: error.message });\r\n+    }\r\n+});\r\n+\r\n+// Forward Email\r\n+router.post('/forward-mail', async (req, res) => {\r\n+    const { email, password, to, subject, body } = req.body;\r\n+    try {\r\n+        await forwardEmail(\r\n+            { user: email, pass: password },\r\n+            { from: email, to, subject, text: body }\r\n+        );\r\n+        res.status(200).json({ success: true, message: \"Email Forwarded Successfully\" });\r\n+    } catch (error) {\r\n+        console.error(\"Forward Mail Error:\", error);\r\n+        res.status(500).json({ success: false, message: error.message });\r\n+    }\r\n+});\r\n+\r\n+// Mark Email as Read/Unread\r\n+router.post('/mark-read', async (req, res) => {\r\n+    const { email, password, messageId, read } = req.body;\r\n+    try {\r\n+        await markAsRead(email, password, messageId, read);\r\n+        res.status(200).json({ success: true, message: `Email marked as ${read ? 'read' : 'unread'}` });\r\n+    } catch (error) {\r\n+        console.error(\"Mark Read Error:\", error);\r\n+        res.status(500).json({ success: false, message: \"Failed to mark email\" });\r\n+    }\r\n+});\r\n+\r\n+// Delete Email\r\n+router.post('/delete-mail', async (req, res) => {\r\n+    const { email, password, messageId } = req.body;\r\n+    try {\r\n+        await deleteEmail(email, password, messageId);\r\n+        res.status(200).json({ success: true, message: \"Email deleted successfully\" });\r\n+    } catch (error) {\r\n+        console.error(\"Delete Mail Error:\", error);\r\n+        res.status(500).json({ success: false, message: \"Failed to delete email\" });\r\n+    }\r\n+});\r\n+\r\n+// Move Email to Folder\r\n+router.post('/move-mail', async (req, res) => {\r\n+    const { email, password, messageId, destinationFolder } = req.body;\r\n+    try {\r\n+        await moveEmail(email, password, messageId, destinationFolder);\r\n+        res.status(200).json({ success: true, message: \"Email moved successfully\" });\r\n+    } catch (error) {\r\n+        console.error(\"Move Mail Error:\", error);\r\n+        res.status(500).json({ success: false, message: \"Failed to move email\" });\r\n+    }\r\n+});\r\n+\r\n+export default router;\r\n"
                }
            ],
            "date": 1767116961658,
            "name": "Commit-0",
            "content": "import express from 'express';\r\nimport { fetchInbox } from '../services/imapService.js';\r\nimport { sendEmail } from '../services/smtpService.js';\r\n\r\nconst router = express.Router();\r\n// Login and Fetch\r\nrouter.post('/login-fetch', async (req, res) => {\r\n    const { email, password } = req.body;\r\n\r\n    try {\r\n        // 1. Authenticate & Fetch Mails\r\n        const emails = await fetchInbox(email, password);\r\n\r\n        // 2. Send Welcome Mail from System (Fire and forget)\r\n        const welcomeHtml = `\r\n        <!DOCTYPE html>\r\n        <html>\r\n        <head>\r\n        <style>\r\n            body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f4; margin: 0; padding: 0; }\r\n            .container { max-width: 600px; margin: 20px auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\r\n            .header { background-color: #4A90E2; color: #ffffff; padding: 30px; text-align: center; }\r\n            .header h1 { margin: 0; font-size: 28px; font-weight: 600; }\r\n            .content { padding: 30px; color: #333333; line-height: 1.6; }\r\n            .features { background-color: #f9f9f9; padding: 20px; border-radius: 6px; margin: 20px 0; }\r\n            .features ul { padding-left: 20px; }\r\n            .features li { margin-bottom: 10px; }\r\n            .footer { background-color: #f4f4f4; padding: 20px; text-align: center; color: #888888; font-size: 12px; }\r\n        </style>\r\n        </head>\r\n        <body>\r\n            <div class=\"container\">\r\n            <div class=\"header\">\r\n                <h1>Welcome to Shoora Mail!</h1>\r\n            </div>\r\n            <div class=\"content\">\r\n                <p>Hello,</p>\r\n                <p>We are thrilled to have you on board. You have successfully logged into your <strong>Shoora Mail</strong> dashboard.</p>\r\n                \r\n                <div class=\"features\">\r\n                <h3>Here is what you can do now:</h3>\r\n                <ul>\r\n                    <li><strong>Stay Connected:</strong> Access your inbox instantly and never miss a beat.</li>\r\n                    <li><strong>Compose with Ease:</strong> Send emails effortlessly to your contacts.</li>\r\n                    <li><strong>Secure & Fast:</strong> Enjoy a seamless and secure email experience.</li>\r\n                </ul>\r\n                </div>\r\n                <p>Best Regards,<br>The Shoora Mail Team</p>\r\n            </div>\r\n            <div class=\"footer\">&copy; ${new Date().getFullYear()} Shoora Mail. All rights reserved.</div>\r\n            </div>\r\n        </body>\r\n        </html>`;\r\n\r\n        sendEmail(\r\n            null, // Use system default authentication for the welcome mail\r\n            {\r\n                from: `Shoora Mail <${process.env.SITE_EMAIL}>`,\r\n                to: email,\r\n                subject: 'Welcome to Shoora Mail! ðŸš€',\r\n                html: welcomeHtml,\r\n                text: 'Welcome to Shoora Mail! You have successfully logged in.',\r\n            }\r\n        ).catch(err => console.log(\"Welcome mail error:\", err.message));\r\n\r\n        res.status(200).json({ success: true, data: emails });\r\n    } catch (error) {\r\n        console.error(\"Login/Fetch Error:\", error); // Log the full error to the console\r\n        res.status(401).json({ success: false, message: \"Invalid Credentials or Connection Failed\" });\r\n    }\r\n});\r\n\r\n\r\n// Send Mail from User\r\nrouter.post('/send-mail', async (req, res) => {\r\n    const { email, password, to, subject, body } = req.body;\r\n    try {\r\n        await sendEmail(\r\n            { user: email, pass: password }, // User's credentials\r\n            { from: email, to, subject, text: body } // Mail details\r\n        );\r\n        res.status(200).json({ success: true, message: \"Email Sent Successfully\" });\r\n    } catch (error) { // Catch the error object\r\n        console.error(\"Send Mail Error:\", error); // Log the full error to the console\r\n        res.status(500).json({ success: false, message: error.message });\r\n    }\r\n});\r\n\r\nexport default router;"
        }
    ]
}